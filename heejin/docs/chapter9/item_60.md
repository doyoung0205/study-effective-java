# 일반적인 프로그래밍 원칙

[아이템 60. 정확한 답이 필요하다면 float와 double은 피하라](#정확한-답이-필요하다면-float와-double은-피하라)  
[- 정리](#정리)  

<br>

## 정확한 답이 필요하다면 float와 double은 피하라
- `float`와 `double` 타입은 과학과 공학 계산용으로 설계되었다.
- 이진 부동소수점 연산에 쓰이며, 넓은 범위의 수를 빠르게 정밀한 **'근사치'로 계산하도록 세심하게 설계되었다.**
- 따라서 정확한 결과가 필요할 때는 사용하면 안된다. 
- **`float`와 `double` 타입은 특히 금융 관련 계산과는 맞지 않는다.**
  - 0.1 혹은 10의 음의 거듭 제곱수(10^-1, 10^-2) 등을 표현할 수 없기 때문이다.

### float 금융 관련 연산의 오류
- 1.03 달러 중에서 42센트를 쓰고 남은 돈을 계산해보자.
  ```java
  System.out.println(1.03 - 0.42);  // 0.61이 나와야 하지만 0.6100000000000001이 나옴
  ```

- 1달러로 10센트짜리 사탕 9개를 사고 남은 돈은 계산해보자.
  ```java
  System.out.println(1.00 - 9 * 0.10);  // 0.1이 나와야 하지만 0.09999999999999998이 나옴
  ```

- 10센트, 20센트, 30센트, ... 1달러 짜리 사탕이 있을 때 1달러로 살 수 있는 개수
  - [부동소수 타입을 사용하여 오류 발생](../../src/main/java/study/heejin/chapter9/item60/DoubleChange.java)
  - [BigDecimal 사용하여 오류 해결](../../src/main/java/study/heejin/chapter9/item60/BigDecimalChange.java) 
    - 하지만 속도가 느리고 쓰기 불편하다.
  - [정수 타입을 사용하여 오류 해결](../../src/main/java/study/heejin/chapter9/item60/IntChange.java)


- 금융 계산에는 BigDecimal, int 혹은 long을 사용해야 한다.
  - `BigDecimal`의 단점은 기본 타입보다 쓰기가 훨씬 불편하고, 훨씬 느리다.
  - `BigDecimal`의 대안으로 `int` 혹은 `long` 타입을 쓸 수도 있다. 그럴 경우 다룰 수 있는 값의 크기가 제한되고, 소수점을 직접 관리해야 한다.


<br>

### 정리
- 정확한 답이 필요한 계산에는 `float`나 `double`을 피하라.
- 코딩 시의 불편함이나 성능 저하를 신경쓰지 않겠다면 `BigDecimal`을 사용하라.
- 반면, 성능이 중요하고 소수점을 직접 추적할 수 있고 숫자가 너무 크지 않다면 `int`나 `long`을 사용하라.





<br>

