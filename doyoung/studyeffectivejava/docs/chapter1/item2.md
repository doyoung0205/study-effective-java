# 생성자에 매개변수가 많다면 빌더를 고려하라


## 등장 배경
다양한 생성자가 필요함에 따라서 클라이언트가 생성자를 호출 할 때 매개변수가 헷갈릴 가능성이 높다. 

또한 기본 생성자와 setter 를 이용한 `자바빈즈 패턴`을 사용하자면 객체 하나를 만들려면 메서드를 여러 개 호출해야 하고, 객체가 완전히 
생성되기 전까지 일관성(consistency)이 무너진 상태에 놓이게 된다. 따라서 불면으로 만들수 없다.

더 고안한 방법은 생성이 끝난 객체를 '얼리고' 얼리기 전에는 사용할 수 없도록 하는 방법이다.
하지만 이는 객체 사용전에 프로그래머가 freeze 메서드를 확실히 호출해줬는지를 컴파일러가 보증할 방법이 없어서 런타임 오류에 취약하다.

> 따라서 등장한 패턴이 빌더 패턴

클라이언트는 필요한 객체를 직접 만드는 대신, 필수 생성자만으로 생성자를 호출해 빌더 객체를 얻는다.
그런 다음 빌더 객체가 제공하는 세터 메서들로 원하는 선택 매개변수들을 설정한다. (플로언트 API, 메서드 연쇄)
마지막으로 build 메서드를 통해서 필요한 (불변)객체를 얻는다.


빌더패턴은 계층적으로 설계된 클래스와 함께 쓰기에 좋다.



## 장단점
### 장점
- 상당히 유연하다. 빌더 하나로 여러 객체를 순회하면서 만들 수 있고, 빌더에 넘기는 매개변수에 따라 다른 객체를 만들 수도 있다.
- 빌더에 넘기는 매개변수에 따라 다른 객체를 만들 수도 있다.
- 부여되는 일련번호와 같은 특정 필드는 빌더가 알아서 채우도록 할 수 있다.
### 단점
- 객체를 만들려면, 그에 앞서 빌터부터 만들어야 한다.
  - 빌더 생성 비용이 크지는 않지만 성능에 민감한 상황에서는 문제가 될 수 있다.
- 점층적 생성자 패턴 보다는 코드가 장황해서 매개변수가 4개 이상은 되어야 값어치를 한다.
  - 하지만 API는 시간이 지날수록 매개변수가 많아지는 경향이 있음을 명심
  - 생성자 정적 팩터리 방식으로 시작했다가 나중에 매개변수가 많아지면 빌더 패턴으로 전환 할수도 있지만,
  - 이전에 만들어준 생성자와 정적 팩터리가 아주 도드라져 보일 것이다. 그러니 애초에 빌더로 시작하는 편이 나을 수도 있다.


## 추가

> 필수적으로 매개변수가 많다면 필수 단계를 고려해볼 수 있을것 같다.
---
