## item89 인스턴스 수를 통제해야 한다면 readResolve보다는 열거 타입을 사용하라

### readResolve 기능을 이용하면 readObject가 만들어낸 인스턴스를 다른 것으로 대체할 수 있다
- 역직렬화한 객체 클래스가 readResolve 메서드를 적절히 정의해두었다면, 역직렬화 후 새로 생성된 객체를 대신 반환한다
- 대부분의 경우 새로 생성된 객체 참조는 유지하지 않으므로 바로 가비지 컬렉션 대상이 된다 

### readResolve 인스턴스 통제 목적으로 사용한다면 객체 참조 타입 인스턴스 필드는 모두 transient로 선언해야 한다

### final 클래스라면 readResolve는 private으로 해야 한다
- readResolve 메서드의 접근성을 통해 `도둑 클래스` 와 같이 객체 유효성을 깨뜨릴 수 있다

### 열거 타입을 사용하는 경우 불변식을 지킬 수 있다
- 열거 타입은 기본적으로 객체를 하나만 만들기 때문에 인스턴스 수를 안전하게 통제할 수 있다

### 정리
- 불변식을 지키기 위해 인스턴스를 통제해야 한다면 가능한 한 열거 타입을 사용하자 
- 여의치 않은 상황에서 직렬화와 인스턴스 통제가 모두 필요하다면 readResolve 메서드를 작성한다
  - 모든 참조 타입 인스턴스 필드를 transient로 선언한다 