## item79 과도한 동기화는 피해라

### 응답 불가와 안전 실패를 피하려면 동기화 메서드나 동기화 블록 안에서는 제어를 절대로 클라이언트에 양보해서는 안 된다
- 동기화 영역 안에서 재정의할 수 있는 메서드를 호출하면 안 되며, 클라이언트가 넘겨준 함수 객체를 호출해서는 안 된다
  - 클라이언트가 해당 객체를 통제하여 악용할 수 있다(교착 상태, 데이터 훼손 등)

### 외계인 메서드
- 클래스의 경우 메서드에 대한 정보가 없으면 외계인 메서드라 부른다
- p.421 `SetObserver`의 added 메서드가 `ObservableSet` 객체에서 외계인 메서드이다
  - `ObservableSet`은 added 메서드에 대한 내용을 알지 못한다
  - 해당 메서드가 `동기화` 영역 내에 존재하는 경우 교착 상태에 빠지거나 데이터가 훼손될 수 있다

### 동기화 내에서 외계인 메서드 호출을 피하라
- 동기화 영역 내에 외계인 메서드를 호출하는 경우 교착 상태에 빠질 수 있다

### CopyOnWriteArrayList 를 사용하라
- `java.util.concurrent.CopyOnWriteArrayList` 
- 기본 배열의 새 복사본을 만들어 모든 변경 작업(추가, 설정 등)이 구현되는 ArrayList의 스레드로부터 안전한 변형.

### 동기화 영역에서는 가능한 일을 적게 하라 
- 오래 걸리는 작업이라면 동기화 영역 바깥으로 옮기는 방법을 찾아라


### 정리
- 교착상태와 데이터 훼손을 피하려면 동기화 영역 안에서 `외계인 메서드`를 절대 호출하지 말자
- 동기화 영역 내에서 작업을 최소한으로 줄여라