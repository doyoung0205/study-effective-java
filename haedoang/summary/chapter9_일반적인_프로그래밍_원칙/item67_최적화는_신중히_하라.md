## item67 최적화는 신중히 하라

### 빠른 프로그램보다는 좋은 프로그램을 작성하라
- 성능 때문에 견고한 구조를 희생하는 것은 어리석은 행동이다
- 구현상의 문제는 나중에 최적화할 수 있지만 아키텍처의 결함이 성능을 저하하는 경우 시스템 전체를 다시 작성해야 할 수 있기 때문

### 성능을 제한하는 설게를 피하라
- API, 네트워크 프로토콜 등의 설계 요소는 완성 후에는 변경하기 어렵거나 불가능하기 때문에 성능을 심각하게 제한할 수 있다

### API 설계할 때는 성능에 주는 영향을 고려하라
- `public` 타입을 가변 객체로 만들면 불필요한 방어적 복사를 유발할 수 있다
- 컴포지션 대신 상속으로 구현된 객체는 상위 클래스에 영원히 종속되어 성능의 제약까지 물려받는다
- 인터페이스 대신 구현 타입을 사용하는 것은 특정 구현체에 종속하게 되어 더 성능이 좋은 구현체로 변경이 어렵다

### 성능을 위해 API를 왜곡하는 것은 매우 안 좋은 생각이다
- 명확하고 결함이 ㅇ벗는 구조를 갖춘 프로그램을 먼저 완성한 뒤 최적화를 고려해야 한다

### 각각의 최적화 시도 전후로 성능을 확인할 것
- 최적화를 한다면 반드시 최적화 이전/이후의 테스틐를 해야 한다
- 지연이 되는 원인을 파악하지 못하고 작성한 최적화는 제대로 된 성능 개선을 보기 어렵다
- 프로파일링 도구가 있다면 최적화할 부분을 찾는데 도움이 된다 


### 정리
- 빠른 프로그램을 만들려하지 말고 좋은 프로그램을 작성하라
- 좋은 프로그램을 만들다보면 성능은 따라오게 된다
- API, 네트워크 프로토콜 등을 설계할 때는 성능에 염두를 두어야 한다
- 시스템 구현 후 성능을 측정하고 기대 효과를 달성한 경우 최적화를 할 필요는 없다
- 기대 속도가 나오지 않는 경우 프로파일링 도구를 통해 지연되는 부분을 체크하여 성능 최적화를 하라
- 성능 최적화 전후로 성능을 비교하여 최적화의 성능 개선 효과가 나타나는 지 분석하는 것이 반드시 필요하다