## item55 옵셔널 반환은 신중히 하라

### Optional 사용 시 주의할 점
- 옵셔널 반환 시 절대 `null`값을 반환하면 안된다  
    - `Optional.empty()` 등을 활용하여 비어있음을 명시해야한다
    - null 반환은 optional 사용을 완전히 무시하는 행위이다
- 옵셔널은 검사 예외와 취지가 비슷하다
  - 기본값을 지정할 수 있다 `.orElse()`
  - 원하는 예외를 던질 수 있다 `.orElseThrow()`
  - 값이 채워져 있다고 가정할 수 있다. `.get()` => 없는 경우 `NoSuchElementException` 예외 발생
- 컬렉션, 스트림, 배열, 옵셔널 같은 컨테이너 타입을 옵셔널로 감싸면 안된다
  - 빈 컬렉션을 반환하는 것이 낫다


### 옵셔널 사용 규칙 
- 결과가 없을 수 있으며, 클라이언트가 이 상황을 특별히 처리해야 하는 경우 `Optional<T>`를 반환한다
  - ex) jpaRepository.findById()
- 박싱된 기본 타입을 담은 옵셔널을 반환하지 않도록 한다
  - `OptionalInt`, `OptionalLong`, `OptionalDouble` 사용할 것
- 옵셔널을 컬렉션의 키, 값, 원소나 배열의 원소로 사용하는 것은 좋지 않다

### 정리
- 값을 반환하지 못할 가능성이 있고, 호출 시 반환값이 없을 가능성을 염두에 둬야하면 옵셔널을 반환한다
- 옵셔널 사용으로 인해 성능 저하가 뒤따를 수 있으므로, 성능이 민감한 경우 `null`로 대체한다
