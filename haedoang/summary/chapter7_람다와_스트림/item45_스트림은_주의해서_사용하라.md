## item45 스트림은 주의해서 사용하라

### 스트림의 핵심

- 데이터 원소의 유한 또는 무한 시퀀스를 뜻한다
- 스트림 파이프라인은 이 원소들로 수행하는 연산 단계를 표현한다

### 스트림 파이프라인

- 소스 스트림에서 시작해 종단 연산으로 끝나며 하나 이상의 중간 연산이 있을 수 있다
- 각 중간 연산은 스트림을 어떠한 방식으로 변환한다
- 스트림 파이프라인은 지연평가(lazy evaluation)된다. 종단 연산 시점에 수행된다
- 스트림 API는 메서드 연쇄를 지원하는 플루언트 API(fluent API)이다
    ```java
    list.stream()       //시작
            .filter(element -> {                    //중간 연산
                log.info("filter() was called");
                return element.contains("2");
            })                                  
            .map(element -> {                       //중간 연산
                log.info("map() was called");
                return element.toUpperCase();
            })
            .findFirst(); // 종단 연산 
    ```

### 스트림은 간결하나 코드가 길어지는 경우 가독성이 좋지 않다
- 람다와 마찬가지로 네임이 없는 함수형 프로그래밍을 대량 사용할 경우 오히려 가독성이 떨어진다
- 기존 코드를 스트림으로 리팩터링하는 것은 좋으나 위처럼 가독성이 떨어지는 경우는 전자의 코드가 유지보수하기 더 좋다

### 함수 객체로는 할 수 없지만 코드 블록으로는 할 수 있는 일
1. 코드 블록에서는 범위 안의 지역변수를 읽고 수정이 가능하다. 하지만 람다에서는 final 변수만 읽을 수 있고 지역 변수 수정이 불가하다
2. 코드 블록에서는 `return`, `break`, `continue` 등의 블록을 제어 가능하나 스트림은 그렇지 않다

### 스트림의 사용을 고려할만한 경우
- 원소들의 시퀀스를 일관되게 변환한다
- 원소들의 시퀀스를 필터링한다
- 원소들의 시퀀스를 하나의 연산을 사용해 결합한다
- 원소들의 시퀀스를 컬렉션에 모은다
- 원소들의 시퀀스에서 특정 조건을 만족하는 원소를 찾는다


### 정리
- 스트림 방식과 반복 방식 중 유지보수 측면과 가독성을 따져서 사용하도록 하자
- 무분별하게 스트림을 사용하는 것은 좋지 않은 코드를 만들 수 있다



### 출처 및 예제 코드 작성
- [https://www.baeldung.com/java-streams](https://www.baeldung.com/java-streams)
- 해당 챕터 학습해서 정리할 것 (7장 끝날때까지)



- 

